rndefine("#RNMainImageField",["#RNMainCore/EventManager","#RNMainFormBuilderCore/FieldBase.Options","lit/decorators","#RNMainFormBuilderCore/FieldBase","lit","#RNMainFormBuilderCore/FieldBase.Model","#RNMainCore/StoreBase"],(function(e,t,i,n,s,l,o){"use strict";var r;let a=i.customElement("rn-image-field")(r=class extends n.FieldBase{SubRender(){return s.html` <div class='rnParagraphField'> ${this.GetImage()} </div> `}InternalSerialize(e){return null}GetStoresInformation(){return!1}GetImage(){let e=null;return"stretch"!=this.model.Options.Alignment&&""!=this.model.Options.Alignment&&(e=this.model.Options.Alignment),null==this.model.Src?s.html`<div style="width: 100px;height: 100px;border: 1px solid #dfdfdf;"/>`:"banner"==this.model.Options.Alignment?s.html` <div style="position: relative;width: 100%;height: ${this.model.Options.Height};background-image: url(${this.model.Src});background-position: center;background-size: ${this.model.Options.BannerStyle}"> </div> `:s.html` <div style="text-align: ${e};position: relative;"> <img @load=${e=>this.InitializeZoom(e.target,this.model.Src)} style="width: ${"stretch"==this.model.Options.Alignment?"100%":this.model.Options.Width};max-width: 100%;height: ${this.model.Options.Height}};" class='rnImg' src=${this.model.Src} /> </div>`}InitializeZoom(e,t){null!=this.model.ZoomManager&&this.model.ZoomManager.Execute(e,t)}})||r;class d{Execute(e,t){if(null==e)return;let i=t=>{var i,o,r;null!=n&&(n.style.display="block"),this.lens.style.display="block",t.preventDefault(),i=function(t){var i,n=0,s=0;return t=t||window.event,i=e.getBoundingClientRect(),n=t.pageX-i.left,s=t.pageY-i.top,n-=window.pageXOffset,s-=window.pageYOffset,{x:n,y:s}}(t),o=i.x-this.lens.offsetWidth/2,r=i.y-this.lens.offsetHeight/2,o>e.getBoundingClientRect().width-this.lens.offsetWidth&&(o=e.getBoundingClientRect().width-this.lens.offsetWidth),o<0&&(o=0),r>e.getBoundingClientRect().height-this.lens.offsetHeight&&(r=e.getBoundingClientRect().height-this.lens.offsetHeight),r<0&&(r=0),this.lens.style.left=o+"px",this.lens.style.top=r+"px",n.style.backgroundPosition="-"+o*s+"px -"+r*l+"px"},n=this.GetResultContainer(e);null==this.lens&&(this.lens=document.createElement("DIV"),this.lens.style.width="40px",this.lens.style.height="40px",this.lens.style.position="absolute",this.lens.style.border="1px solid #d4d4d4"),e.parentElement.insertBefore(this.lens,e);let s=n.offsetWidth/this.lens.offsetWidth,l=n.offsetHeight/this.lens.offsetHeight;n.style.backgroundImage="url('"+t+"')",n.style.backgroundSize=e.getBoundingClientRect().width*s+"px "+e.getBoundingClientRect().height*l+"px",this.lens.addEventListener("mouseenter",(()=>{let t=e.getBoundingClientRect();this.ResultContainer.style.top=t.top+t.height+document.documentElement.scrollTop+"px",this.ResultContainer.style.left=t.left+"px"})),this.lens.addEventListener("mousemove",i),this.lens.addEventListener("mouseleave",(()=>{null!=n&&(n.style.display="none"),this.lens.style.display="none"})),this.lens.style.display="none",n.style.display="none",e.addEventListener("mousemove",i),this.lens.addEventListener("touchmove",i),e.addEventListener("touchmove",i)}GetResultContainer(e){return null==this.ResultContainer&&(this.ResultContainer=document.createElement("div"),this.ResultContainer.style.width="200px",this.ResultContainer.style.height="200px",this.ResultContainer.style.position="absolute",this.ResultContainer.style.zIndex="100000",document.body.appendChild(this.ResultContainer)),this.ResultContainer.style.display="block",this.ResultContainer}}class h extends l.FieldBaseModel{constructor(e,t){super(e,t)}async Initialize(e=null){return this.Options.AllowZoom&&!this.RootFormBuilder.IsDesign&&this.LoadZoomManager(),super.Initialize(e)}GetStoresInformation(){return!1}InternalSerialize(e){}InitializeStartingValues(){var e;this.Src=null===(e=this.Options.Src)||void 0===e?void 0:e.URL}GetDynamicFieldNames(){return["ImageField"]}SetSrc(e){this.Src=e,this.Refresh()}render(){return s.html`<rn-image-field .model="${this}"></rn-image-field>`}LoadZoomManager(){this.ZoomManager=new d}}var u,m,g;let p=(u=o.StoreDataType(Object),m=class extends t.FieldBaseOptions{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Src",g,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.Label="",this.Type=t.FieldTypeEnum.Image,this.Src=null,this.Alignment="",this.Width="",this.Height="",this.BannerStyle="cover",this.AllowZoom=!1}},g=babelHelpers.applyDecoratedDescriptor(m.prototype,"Src",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m);exports.ImageField=a,exports.ImageFieldModel=h,exports.ImageFieldOptions=p,e.EventManager.Subscribe("GetFieldOptions",(e=>{if(e==t.FieldTypeEnum.Image)return new p})),e.EventManager.Subscribe("GetFieldModel",(e=>{if(e.Options.Type==t.FieldTypeEnum.Image)return new h(e.Options,e.Parent)}))}));
