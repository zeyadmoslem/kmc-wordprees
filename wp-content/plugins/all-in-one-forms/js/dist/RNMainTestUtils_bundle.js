rndefine("#RNMainTestUtils",["exports","#RNMainFormBuilderCore/ConditionProcessorBase","#RNMainFormBuilderCore/ConditionBase.Options","#RNMainFormBuilderCore/FormBuilder.Model","#RNMainFormBuilderCore/FormBuilder.Options","#RNMainFormBuilderCore/FieldBase.Options","#RNMainFormBuilderCore/FBRow.Options","#RNMainFormBuilderCore/FBColumn.Options","#RNMainTextField/TextField.Options","#RNMainNumericField/NumericField.Options","#RNMainNameField/NameField.Options","#RNMainRepeaterField/RepeaterField.Options","#RNMainFormBuilderCore/ItemOptions.Options","#RNMainCheckBoxField/CheckBoxField.Options","#RNMainDatePickerField/DatePickerField.Options","#RNMainListField/ListField.Options","#RNMainSwitchField/SwitchField.Options","#RNMainCore/EventManager","#RNMainFormBuilderCore/CalculatorBase","#RNMainBuilder/FormBuilderDesigner.Model"],(function(e,i,t,n,o,r,s,l,d,u,a,p,c,O,m,h,F,C,P,w){"use strict";class D extends(g(Object)){constructor(...e){super(...e),this.Options=(new p.RepeaterFieldOptions).Merge()}}class M{constructor(e){this.Options=(new O.CheckBoxFieldOptions).Merge({Id:e}),this.Options.Options=[]}AddOption(e,i,t=!1,n="",o=[]){return this.Options.Options.push((new c.ItemOptions).Merge({Id:e,Label:i,Selected:t,RegularPrice:n,AdditionalOptionValue:o.map((e=>(new c.AdditionalOptionValue).Merge(e)))})),this}AddAdditionalColumns(e,i){this.Options.AdditionalOptionColumn.push((new c.AdditionalColumnOptions).Merge({Id:e,Label:i}))}}class y{constructor(){this.Columns=[],this.RowValues=[]}AddColumn(e,i){return this.Columns.push({Id:e,Label:i}),this}AddRowValue(e){this.RowValues.push(e)}}class b{constructor(e){this.Options=e}AddCondition(e){this.Options.Conditions.push(e)}}function f(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,n)}return t}function g(e){return class extends e{async AddField(e,i,t=!0){let n=i;i instanceof r.FieldBaseOptions||(n=(new i).Merge({Id:e}));let o=(new s.FBRowOptions).Merge(),d=(new l.FBColumnOptions).Merge();if(d.Field=n,o.Columns.push(d),null!=this.Options.RepeaterItemTemplate?this.Options.RepeaterItemTemplate.Rows.push(o):this.Options.Rows.push(o),null!=this.ClearForm){return await this.ClearForm(),this.GetFieldById(e)}return null}AddTextField(e="",i=1,t=null,n=null){let o=new b((new d.TextFieldOptions).Merge({Id:i,DefaultText:e}));return null!==t&&(o.Options.PriceType="Dummy",o.Options.DummyPrice=t),null!=n&&n(o),this.AddField(i,o.Options)}AddNumericField(e,i=1,t=null){let n=new b((new u.NumericFieldOptions).Merge({Id:i,DefaultValue:e.toString()}));return null!=t&&t(n),this.AddField(i,n.Options)}AddNameField(e,i,t=1,n=null){let o=new b((new a.NameFieldOptions).Merge({Id:t,FirstNameDefaultText:e,LastNameDefaultText:i}));return null!=n&&n(o),this.AddField(t,o.Options)}AddRepeaterField(e,i=1){let t=new D(i);return null!=e&&e(t),this.AddField(i,t.Options)}AddCheckBoxField(e,i=1){let t=new M(i);return null!=e&&e(t),this.AddField(i,t.Options)}AddDateField(e,i=1,t=null){let n=new b((new m.DatePickerFieldOptions).Merge({Id:i,DefaultDate:e}));return null!=t&&t(n),this.AddField(i,n.Options)}AddList(e,i=1){let t=new y;null!=e&&e(t);let n=[],o=1;for(let e of t.RowValues)n.push({Columns:e,Id:o}),o++;this.AddPreviousData(i,{Value:n});let r=(new h.ListFieldOptions).Merge({Id:i});for(let e of t.Columns)r.Columns.push((new h.ListColumnOptions).Merge({Id:e.Id,Name:e.Label}));r.EnableMultipleColumns=t.Columns.length>1,this.AddField(i,r)}AddPreviousData(e,i={}){null==this.PreviousData&&(this.PreviousData=[]),null==this.PreviousData.Fields&&(this.PreviousData.Fields=[]),this.PreviousData.Fields.push(function(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?f(Object(t),!0).forEach((function(i){babelHelpers.defineProperty(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}({Id:e},i))}RemovePreviousData(e,i=!1){var t,n;let o=null===(t=this.PreviousData)||void 0===t||null===(n=t.Fields)||void 0===n?void 0:n.find((i=>i.Id==e));null!==o&&(this.PreviousData.Fields.splice(this.PreviousData.Fields.indexOf(o),1),i&&this.ClearForm())}AddSwitchField(e,i=1,t=null){let n=new b((new F.SwitchFieldOptions).Merge({Id:i,Checked:e}));return null!=t&&t(n),this.AddField(i,n.Options)}}}function B(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,n)}return t}class v extends(g(n.FormBuilderModel)){constructor(e=1,i=null,t=null){super(e,null==i?(new o.FormBuilderOptions).Merge():i,null==t?{}:t),this.FormId=e,this.AdditionalOptions.CurrentUser={Id:1,Roles:["administrator"]}}AddPreviousData(e,i={}){null==this.PreviousData&&(this.PreviousData=[]),null==this.PreviousData.Fields&&(this.PreviousData.Fields=[]),this.PreviousData.Fields.push(function(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?B(Object(t),!0).forEach((function(i){babelHelpers.defineProperty(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}({Id:e},i))}async SubmitForm(e,i,t){return!1}RemovePreviousData(e,i=!1){var t,n;let o=null===(t=this.PreviousData)||void 0===t||null===(n=t.Fields)||void 0===n?void 0:n.find((i=>i.Id==e));null!==o&&(this.PreviousData.Fields.splice(this.PreviousData.Fields.indexOf(o),1),i&&this.ClearForm())}}class R extends i.ConditionProcessorBase{constructor(){super(),this.ConditionOptions=null,this.FormBuilder=null}GetExecuteOnInitialize(){return!1}ExecuteCondition(e=!1,i=null){this.Initialize(this.FormBuilder,this.ConditionOptions,i);let t=super.ExecuteCondition(e,i);return this.ConditionOptions.ConditionGroups=[],t}GetOrCreateFormBuilder(){return null==this.FormBuilder&&(this.FormBuilder=new v(1,(new o.FormBuilderOptions).Merge(),{})),this.FormBuilder}GetOrCreateCondition(){return null==this.ConditionOptions&&(this.ConditionOptions=(new t.ConditionBaseOptions).Merge()),this.ConditionOptions}ExecuteFalseAction(e){}ExecuteTruAction(e){}AddCondition(e,i,n,o=t.SubTypeEnum.Text,r=t.ConditionLineTypeEnum.Field,s=""){let l=this.GetOrCreateCondition(),d=(new t.ConditionGroupOptions).Merge({ConditionLines:[{}]});d.ConditionLines[0].FieldId=e,d.ConditionLines[0].Type=r,d.ConditionLines[0].PathId=s,d.ConditionLines[0].SubType=o,d.ConditionLines[0].Comparison=n,d.ConditionLines[0].Value=i,l.ConditionGroups.push(d)}}class A extends(g(w.FormBuilderDesignerModel)){constructor(e=1,i=null,t=null){super(e,null==i?(new o.FormBuilderOptions).Merge():i,null==t?{}:t),this.FormId=e,this.AdditionalOptions.CurrentUser={Id:1,Roles:["administrator"]}}InitializePriceCalculator(){}}e.ConditionProcessorTestUtil=R,e.FormBuilderTestUtils=v,e.FormBuilderDesignerTestUtils=A,e.ConditionBuilderUtils=class{static AddCondition(e,i,n,o=t.SubTypeEnum.Text,r=t.ConditionLineTypeEnum.Field,s="",l=null){let d;d=null==l?(new t.ConditionBaseOptions).Merge():l,r==t.ConditionLineTypeEnum.Field&&d.ElementsUsed.push((new t.ElementUsedOptions).Merge({Id:e,Type:t.ElementUsedTypeEnum.Field}));let u=(new t.ConditionGroupOptions).Merge({ConditionLines:[{}]});return u.ConditionLines[0].FieldId=e,u.ConditionLines[0].Type=r,u.ConditionLines[0].PathId=s,u.ConditionLines[0].SubType=o,u.ConditionLines[0].Comparison=n,u.ConditionLines[0].Value=i,d.ConditionGroups.push(u),d}};class I extends P.CalculatorBase{GetPrice(){return this.GetDummyPrice()}ExecuteCalculation(e,i){return{Quantity:1,RegularPrice:this.GetDummyPrice()}}GetDummyPrice(){return null==this.Field.Options.DummyPrice?0:this.Field.Options.DummyPrice}}C.EventManager.Subscribe("GetCalculator",(e=>{if("Dummy"==e)return new I})),e.DummyCalculator=I,Object.defineProperty(e,"__esModule",{value:!0})}));
