rndefine("#RNMainEntry",["lit/decorators","lit","#RNMainCoreUI/LitModel","#RNMainWPTable/WPTableColumn","lit/directives/ref.js","#RNMainLit/Lit","#RNMainCore/WpAjaxPost","#RNMainCore/LitElementBase","#RNMainAlertDialog/AlertDialog","#RNMainCoreUI/ModelBase","#RNMainFormBuilderCore/FormBuilder.Options","#RNMainBuilder/FormBuilderDesigner.Model","#RNMainFormBuilderCore/FieldBase.Options","#RNMainNameField/NameField.Options","#RNMainDialog/Dialog","#RNMainPreMadeDialogs/DeleteDialog","#RNMainCoreUI/ToastService","#RNMainFormBuilderCore/FormBuilder.Model","#RNMainFormBuilderCore/ConditionBase.Options","#RNMainConditionDesigner/ConditionBuilder.Model","#RNMainCore/StoreBase"],(function(e,t,i,n,s,a,l,r,o,d,c,h,u,m,p,f,v,y,g,$,w){"use strict";var b={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="search",i=[],n="f002",s="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z";e.definition={prefix:"fas",iconName:t,icon:[512,512,i,n,s]},e.faSearch=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(b);var S,x,_,F,E,T,V,D,I={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="download",i=[],n="f019",s="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z";e.definition={prefix:"fas",iconName:t,icon:[512,512,i,n,s]},e.faDownload=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(I),S=e.customElement("rn-entries"),x=e.query(".tableContainer"),S((_=class extends i.LitModel{constructor(...e){super(...e),this.Height=0,babelHelpers.initializerDefineProperty(this,"tableContainer",F,this)}static get properties(){return{IsBusy:{type:Boolean},tableIsBusy:{type:Boolean}}}render(){var e;return null!=this.model.EntryToEdit?t.html`<rn-entry-edition .model="${this.model}"></rn-entry-edition>`:null!=this.model.EntryToView?t.html`<rn-entry-view .model="${this.model}"></rn-entry-view>`:t.html`<div class='rednao' style="padding: 20px"><fieldset style="padding: 10px;border: 1px solid #dfdfdf;border-radius: 10px;"><legend><rn-fontawesome .icon=${b.faSearch}></rn-fontawesome> Search Criteria</legend><div><rn-inputs-datepicker style="width: 150px;display: inline-block;margin-right: 5px;" .value="${this.model.StartDate}" .label="${"Start Date"}" @change="${e=>{this.model.StartDate=e.detail,this.forceUpdate()}}"></rn-inputs-datepicker><rn-inputs-datepicker style="width: 150px;display: inline-block;margin-right: 5px" .value="${this.model.EndDate}" .label="${"End Date"}" @change="${e=>{this.model.EndDate=e.detail,this.forceUpdate()}}"></rn-inputs-datepicker><rn-inputs-select style="width: 250px;display: inline-block;margin-right: 5px" .label="${"Form"}" .value="${this.model.Form}" @change="${e=>this.model.Form=e.detail}" .options="${this.model.FormList.map((e=>({Label:e.Name,Value:e.Id})))}"></rn-inputs-select><rn-spinner-button style="display: inline-block;margin-top: 18px" .isBusy=${this.model.IsBusy} @click=${()=>this.model.Search()} .addLabelMargin={true} .icon=${b.faSearch} .label="${"Search"}"></rn-spinner-button><div> <rn-switch-container style="margin-bottom: 10px" .content="${a.rnIf(this.model.ShowAdvanceOptions&&{key:"1",content:this.model.ConditionBuilder.render(null===(e=this.model.FormList.find((e=>e.Id==this.model.Form.toString())))||void 0===e?void 0:e.FormBuilder,this.model.AdvancedOptionsCondition)})}"> </rn-switch-container><a href="#" @click="${e=>{this.model.ToggleAdvancedCondition()}}">${this.model.ShowAdvanceOptions?"Hide advanced filters":"Show advanced filters"}</a></div></div></fieldset><div style="padding: 13px 0"><button ?disabled=${0==this.model.Form||null==this.model.Form} class='rnbtn rnbtn-primary' style="cursor: pointer" @click=${e=>{e.preventDefault(),this.model.Export()}}><rn-fontawesome .icon=${I.faDownload}></rn-fontawesome> Export</button></div><div class="tableContainer"><rn-wptable ${s.ref((e=>this.model.Table=e))} @applyBulkAction="${e=>this.model.ApplyBulkAction(e.detail)}" .tableIsBusy="${this.model.tableIsBusy}" .tableIsBusyMessage="${"Loading records, please wait"}" .fillAvailableWidth="${!0}" .isClickable="${!0}" .emptyText="${t.html`<p style="margin:0;padding: 0;">${this.model.SearchWasExecuted?"This form does not have any entry recorded":"Click search to see the records of a form"} </p>`}" .bulkActions="${[{Title:"Delete",Id:"Delete"}]}" .totalNumberOfRows="${this.model.TotalNumberOfRows}" .pageSize="${this.model.PageSize}" .stickyOffset="${this.model.StickyOffset}" @pageSizeChanged="${e=>{this.model.PageIndex=0,this.model.PageSize=e.detail,this.model.InternalSearch()}}" @rowClicked="${e=>this.model.ViewItem(e)}" @actionClicked="${e=>this.model.ActionClicked(e.detail.Action,e)}" style="margin-top: 10px" .pageIndex="${this.model.PageIndex}" @pageChanged="${e=>{this.model.PageIndex=e.detail,this.model.InternalSearch(),this.forceUpdate()}}" .availableSizes="${[{Label:"30",Size:30},{Label:"60",Size:60},{Label:"90",Size:90},{Label:"150",Size:150},{Label:"250",Size:250}]}" .Data="${this.model.Data}" .Columns="${this.model.ColumnList.map(((e,t)=>new n.WPTableColumn(e.Title,"",e.Width).SetIsNumeric(e.IsNumeric).SetIsClickable(0==t).SetHasCheckbox(0==t).SetActions(0==t?[{Id:"View",Title:"View"},{Title:"Edit",Id:"Edit"},{Id:"Delete",Title:"Delete"}]:[]).AddFormatter(((t,i)=>e.Format(i)))))}"</rn-wptable> </div></div>`}},F=babelHelpers.applyDecoratedDescriptor(_.prototype,"tableContainer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_)),e.customElement("rn-meta-value-displayer")(class extends r.LitElementBase{static get properties(){return{}}render(){return null==this.MetaValues||0==this.MetaValues.length?"":t.html`<div><h1 style="margin: 0;margin-bottom: 1px;margin-top: 20px">Additional Information</h1><hr style="margin: 0;margin-bottom: 10px"/>${this.MetaValues.filter((e=>e.IsVisible)).map((e=>t.html`<p class="metaRow"><span class="meta-label">${e.GetLabel()}: </span><span class="meta-value">${e.GetValue()}</span><div>`))}</div> `}});class N{constructor(e,t=[],i=null){this.Title=e,this.Path=t,this.FieldOptions=i,this.IsNumeric=!1,this.Width="200px",this.Parent=null,this.ValueRetriever=null,this.Selected=!1}SetValueRetriever(e){return this.ValueRetriever=e,this}SetParent(e){return this.Parent=e,this}SetWidth(e){return this.Width=e,this}SetIsNumeric(){return this.IsNumeric=!0,this}IsEmpty(e){return""==this.GetValueString(e)}GetValue(e,t=null){if(null!=this.Parent&&null==(e=this.GetChildDataSource(e.Data)))return null;let i=e;if(null!=this.FieldOptions){if(null==i.Data||!Array.isArray(i.Data))return null;if(i=i.Data.find((e=>e.Id==this.FieldOptions.Id)),null==i)return null}if(null!=this.ValueRetriever)return this.ValueRetriever(i);if(null==t&&(t=this.Path),null==t)return i;for(let e of t){if(null==i[e])return null;i=i[e]}return i}GetValueString(e,t=null,i=""){let n=this.GetValue(e,t);return null==n?i:n.toString()}GetNumericValue(e,t=null,i=0){let n=this.GetValue(e,t);return null==n?i:(n=Number(n),isNaN(n)?i:n)}GetChildDataSource(e){let t=this.Parent,i=[t.GetId()];for(;null!=t.FormBuilder&&null!=t.FormBuilder.GetId();)t=t.FormBuilder,i.unshift(t.GetId());for(let t of i){var n;if(null==(e=null===(n=e.find((e=>e.Id==t)))||void 0===n?void 0:n.Value))return null}return{Data:e}}}class L extends N{Format(e){return t.html`<span>${this.GetValueString(e)}</span>`}}class C{static UnixToDate(e,t=0){if(e>0){let i=new Date(1e3*(e+t));return i=new Date(i.setMinutes(i.getMinutes()+i.getTimezoneOffset())),i}return null}static DateToUnix(e,t=0){return(e.getTime()-t)/1e3+-1*e.getTimezoneOffset()*60}}class P extends N{constructor(e,t,i){super(e,t,i)}Format(e){let t=this.GetNumericValue(e);return t=C.UnixToDate(t),t.toLocaleDateString()+" "+t.toLocaleTimeString()}}class O extends N{Format(e){let i=this.GetValueString(e),n=rednaoFormDesigner.StatusList.find((e=>e.Type==i));return null!=n&&(i=n.Label),t.html`<span>${i}</span>`}}const M=e=>{window.emitLitDebugLogEvents&&window.dispatchEvent(new CustomEvent("lit-debug",{detail:e}))};let k;null!==(E=globalThis.litIssuedWarnings)&&void 0!==E||(globalThis.litIssuedWarnings=new Set),k=(e,t)=>{t+=e?` See https://lit.dev/msg/${e} for more information.`:"",globalThis.litIssuedWarnings.has(t)||(console.warn(t),globalThis.litIssuedWarnings.add(t))},k("dev-mode","Lit is in dev mode. Not recommended for production!");const R=(null===(T=window.ShadyDOM)||void 0===T?void 0:T.inUse)&&!0===(null===(V=window.ShadyDOM)||void 0===V?void 0:V.noPatch)?window.ShadyDOM.wrap:e=>e,B=globalThis.trustedTypes,z=B?B.createPolicy("lit-html",{createHTML:e=>e}):void 0,U=e=>e,A=(e,t,i)=>U,G=(e,t,i)=>de(e,t,i),j="$lit$",H=`lit$${String(Math.random()).slice(9)}$`,W="?"+H,q=`<${W}>`,K=document,Z=(e="")=>K.createComment(e),J=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Y=Array.isArray,X=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Q=/-->/g,ee=/>/g,te=new RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),ie=/'/g,ne=/"/g,se=/^(?:script|style|textarea|title)$/i,ae=Symbol.for("lit-noChange"),le=Symbol.for("lit-nothing"),re=new WeakMap,oe=K.createTreeWalker(K,129,null,!1);let de=A;class ce{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let s=0,a=0;const l=e.length-1,r=this.parts,[o,d]=((e,t)=>{const i=e.length-1,n=[];let s,a=2===t?"<svg>":"",l=X;for(let t=0;t<i;t++){const i=e[t];let r,o,d=-1,c=0;for(;c<i.length&&(l.lastIndex=c,o=l.exec(i),null!==o);)if(c=l.lastIndex,l===X){if("!--"===o[1])l=Q;else if(void 0!==o[1])l=ee;else if(void 0!==o[2])se.test(o[2])&&(s=new RegExp(`</${o[2]}`,"g")),l=te;else if(void 0!==o[3])throw new Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else l===te?">"===o[0]?(l=null!=s?s:X,d=-1):void 0===o[1]?d=-2:(d=l.lastIndex-o[2].length,r=o[1],l=void 0===o[3]?te:'"'===o[3]?ne:ie):l===ne||l===ie?l=te:l===Q||l===ee?l=X:(l=te,s=void 0);console.assert(-1===d||l===te||l===ie||l===ne,"unexpected parse state B");const h=l===te&&e[t+1].startsWith("/>")?" ":"";a+=l===X?i+q:d>=0?(n.push(r),i.slice(0,d)+j+i.slice(d)+H+h):i+H+(-2===d?(n.push(void 0),t):h)}const r=a+(e[i]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw")){let e="invalid template strings array";throw e=" Internal Error: expected template strings to be an array with a 'raw' field. Faking a template strings array by calling html or svg like an ordinary function is effectively the same as calling unsafeHtml and can lead to major security issues, e.g. opening your code up to XSS attacks. If you're using the html or svg tagged template functions normally and and still seeing this error, please file a bug at https://github.com/lit/lit/issues/new?template=bug_report.md and include information about your build tooling, if any. ".trim().replace(/\n */g,"\n"),new Error(e)}return[void 0!==z?z.createHTML(r):r,n]})(e,t);if(this.el=ce.createElement(o,i),oe.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=oe.nextNode())&&r.length<l;){if(1===n.nodeType){{const e=n.localName;if(/^(?:textarea|template)$/i.test(e)&&n.innerHTML.includes(H)){const t=`Expressions are not supported inside \`${e}\` elements. See https://lit.dev/msg/expression-in-${e} for more information.`;if("template"===e)throw new Error(t);k("",t)}}if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith(j)||t.startsWith(H)){const i=d[a++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+j).split(H),t=/([.?@])?(.*)/.exec(i);r.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?fe:"?"===t[1]?ye:"@"===t[1]?ge:pe})}else r.push({type:6,index:s})}for(const t of e)n.removeAttribute(t)}if(se.test(n.tagName)){const e=n.textContent.split(H),t=e.length-1;if(t>0){n.textContent=B?B.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],Z()),oe.nextNode(),r.push({type:2,index:++s});n.append(e[t],Z())}}}else if(8===n.nodeType){if(n.data===W)r.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(H,e+1));)r.push({type:7,index:s}),e+=H.length-1}}s++}null==M||M({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){const i=K.createElement("template");return i.innerHTML=e,i}}function he(e,t,i=e,n){var s,a,l,r;if(t===ae)return t;let o=void 0!==n?null===(s=i.__directives)||void 0===s?void 0:s[n]:i.__directive;const d=J(t)?void 0:t._$litDirective$;return(null==o?void 0:o.constructor)!==d&&(null===(a=null==o?void 0:o._$notifyDirectiveConnectionChanged)||void 0===a||a.call(o,!1),void 0===d?o=void 0:(o=new d(e),o._$initialize(e,i,n)),void 0!==n?(null!==(l=(r=i).__directives)&&void 0!==l?l:r.__directives=[])[n]=o:i.__directive=o),void 0!==o&&(t=he(e,o._$resolve(e,t.values),o,n)),t}class ue{constructor(e,t){this._parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){var t;const{el:{content:i},parts:n}=this._$template,s=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:K).importNode(i,!0);oe.currentNode=s;let a=oe.nextNode(),l=0,r=0,o=n[0];for(;void 0!==o;){if(l===o.index){let t;2===o.type?t=new me(a,a.nextSibling,this,e):1===o.type?t=new o.ctor(a,o.name,o.strings,this,e):6===o.type&&(t=new $e(a,this,e)),this._parts.push(t),o=n[++r]}l!==(null==o?void 0:o.index)&&(a=oe.nextNode(),l++)}return s}_update(e){let t=0;for(const i of this._parts)void 0!==i&&(null==M||M({kind:"set part",part:i,value:e[t],valueIndex:t,values:e,templateInstance:this}),void 0!==i.strings?(i._$setValue(e,i,t),t+=i.strings.length-2):i._$setValue(e[t])),t++}}class me{constructor(e,t,i,n){var s;this.type=2,this._$committedValue=le,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=i,this.options=n,this.__isConnected=null===(s=null==n?void 0:n.isConnected)||void 0===s||s,this._textSanitizer=void 0}get _$isConnected(){var e,t;return null!==(t=null===(e=this._$parent)||void 0===e?void 0:e._$isConnected)&&void 0!==t?t:this.__isConnected}get parentNode(){let e=R(this._$startNode).parentNode;const t=this._$parent;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){if(null===this.parentNode)throw new Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");e=he(this,e,t),J(e)?e===le||null==e||""===e?(this._$committedValue!==le&&(null==M||M({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=le):e!==this._$committedValue&&e!==ae&&this._commitText(e):void 0!==e._$litType$?this._commitTemplateResult(e):void 0!==e.nodeType?this._commitNode(e):(e=>{var t;return Y(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])})(e)?this._commitIterable(e):this._commitText(e)}_insert(e,t=this._$endNode){return R(R(this._$startNode).parentNode).insertBefore(e,t)}_commitNode(e){var t;if(this._$committedValue!==e){if(this._$clear(),de!==A){const e=null===(t=this._$startNode.parentNode)||void 0===t?void 0:t.nodeName;if("STYLE"===e||"SCRIPT"===e){let t="Forbidden";throw t="STYLE"===e?"Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and make do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":"Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.",new Error(t)}}null==M||M({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==le&&J(this._$committedValue)){const t=R(this._$startNode).nextSibling;void 0===this._textSanitizer&&(this._textSanitizer=G(t,"data","property")),e=this._textSanitizer(e),null==M||M({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else{const t=document.createTextNode("");this._commitNode(t),void 0===this._textSanitizer&&(this._textSanitizer=G(t,"data","property")),e=this._textSanitizer(e),null==M||M({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){var t;const{values:i,_$litType$:n}=e,s="number"==typeof n?this._$getTemplate(e):(void 0===n.el&&(n.el=ce.createElement(n.h,this.options)),n);if((null===(t=this._$committedValue)||void 0===t?void 0:t._$template)===s)null==M||M({kind:"template updating",template:s,instance:this._$committedValue,parts:this._$committedValue._parts,options:this.options,values:i}),this._$committedValue._update(i);else{const e=new ue(s,this),t=e._clone(this.options);null==M||M({kind:"template instantiated",template:s,instance:e,parts:e._parts,options:this.options,fragment:t,values:i}),e._update(i),null==M||M({kind:"template instantiated and updated",template:s,instance:e,parts:e._parts,options:this.options,fragment:t,values:i}),this._commitNode(t),this._$committedValue=e}}_$getTemplate(e){let t=re.get(e.strings);return void 0===t&&re.set(e.strings,t=new ce(e)),t}_commitIterable(e){Y(this._$committedValue)||(this._$committedValue=[],this._$clear());const t=this._$committedValue;let i,n=0;for(const s of e)n===t.length?t.push(i=new me(this._insert(Z()),this._insert(Z()),this,this.options)):i=t[n],i._$setValue(s),n++;n<t.length&&(this._$clear(i&&R(i._$endNode).nextSibling,n),t.length=n)}_$clear(e=R(this._$startNode).nextSibling,t){var i;for(null===(i=this._$notifyConnectionChanged)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$endNode;){const t=R(e).nextSibling;R(e).remove(),e=t}}setConnected(e){var t;if(void 0!==this._$parent)throw new Error("part.setConnected() may only be called on a RootPart returned from render().");this.__isConnected=e,null===(t=this._$notifyConnectionChanged)||void 0===t||t.call(this,e)}}class pe{constructor(e,t,i,n,s){this.type=1,this._$committedValue=le,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$committedValue=new Array(i.length-1).fill(new String),this.strings=i):this._$committedValue=le,this._sanitizer=void 0}get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e,t=this,i,n){const s=this.strings;let a=!1;if(void 0===s)e=he(this,e,t,0),a=!J(e)||e!==this._$committedValue&&e!==ae,a&&(this._$committedValue=e);else{const n=e;let l,r;for(e=s[0],l=0;l<s.length-1;l++)r=he(this,n[i+l],t,l),r===ae&&(r=this._$committedValue[l]),a||(a=!J(r)||r!==this._$committedValue[l]),r===le?e=le:e!==le&&(e+=(null!=r?r:"")+s[l+1]),this._$committedValue[l]=r}a&&!n&&this._commitValue(e)}_commitValue(e){e===le?R(this.element).removeAttribute(this.name):(void 0===this._sanitizer&&(this._sanitizer=de(this.element,this.name)),e=this._sanitizer(null!=e?e:""),null==M||M({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),R(this.element).setAttribute(this.name,null!=e?e:""))}}class fe extends pe{constructor(){super(...arguments),this.type=3}_commitValue(e){void 0===this._sanitizer&&(this._sanitizer=de(this.element,this.name)),e=this._sanitizer(e),null==M||M({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===le?void 0:e}}const ve=B?B.emptyScript:"";class ye extends pe{constructor(){super(...arguments),this.type=4}_commitValue(e){null==M||M({kind:"commit boolean attribute",element:this.element,name:this.name,value:!(!e||e===le),options:this.options}),e&&e!==le?R(this.element).setAttribute(this.name,ve):R(this.element).removeAttribute(this.name)}}class ge extends pe{constructor(e,t,i,n,s){if(super(e,t,i,n,s),this.type=5,void 0!==this.strings)throw new Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}_$setValue(e,t=this){var i;if((e=null!==(i=he(this,e,t,0))&&void 0!==i?i:le)===ae)return;const n=this._$committedValue,s=e===le&&n!==le||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==le&&(n===le||s);null==M||M({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:s,addListener:a,oldListener:n}),s&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){var t,i;"function"==typeof this._$committedValue?this._$committedValue.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$committedValue.handleEvent(e)}}class $e{constructor(e,t,i){this.element=e,this.type=6,this._$disconnectableChildren=void 0,this._$parent=t,this.options=i}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){null==M||M({kind:"commit to element binding",element:this.element,value:e,options:this.options}),he(this,e)}}const we=window.litHtmlPolyfillSupportDevMode;null==we||we(ce,me),(null!==(D=globalThis.litHtmlVersions)&&void 0!==D?D:globalThis.litHtmlVersions=[]).push("2.2.3"),globalThis.litHtmlVersions.length>1&&k("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.");const be=2;class Se extends class{constructor(e){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,i){this.__part=e,this._$parent=t,this.__attributeIndex=i}_$resolve(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}{constructor(e){if(super(e),this._value=le,e.type!==be)throw new Error(`${this.constructor.directiveName}() can only be used in child bindings`)}render(e){if(e===le||null==e)return this._templateResult=void 0,this._value=e;if(e===ae)return e;if("string"!=typeof e)throw new Error(`${this.constructor.directiveName}() called with a non-string value`);if(e===this._value)return this._templateResult;this._value=e;const t=[e];return t.raw=t,this._templateResult={_$litType$:this.constructor.resultType,strings:t,values:[]}}}Se.directiveName="unsafeHTML",Se.resultType=1;const xe=(_e=Se,(...e)=>({_$litDirective$:_e,values:e}));var _e;class Fe{constructor(e){this.FormBuilderModel=e,this.Meta=[]}GetFieldValueById(e){for(let t of this.Data)if(t.Id==e)return t;return null}Load(e){return this.Meta=[],this.FormId=e.FormId,this.EntryId=e.EntryId,this.Sequence=e.Sequence,this.UnixDate=e.UnixDate,this.Status=e.Status,this.Total=e.Total,this.UserId=e.UserId,this.UserName=e.UserName,this.UserEmail=e.UserEmail,this.Selected=!1,this.ReferenceId=e.ReferenceId,this.FormattedSequence=e.FormattedSequence,this.Data=e.Data,this.EditNonce=e.EditNonce,this.LoadMeta(e.Meta),this}LoadMeta(e){e.forEach((e=>{let t=new Ee;t.DataType=e.DataType,t.EntryId=e.EntryId,t.IsVisible=e.IsVisible,t.MetaName=e.MetaName,t.MetaValue=e.MetaValue,t.DisplayLabel=e.DisplayLabel,t.DisplayValue=e.DisplayValue,this.Meta.push(t)}))}GetMetaValueByName(e,t=null){let i=this.Meta.find((t=>t.MetaName==e));return null==i?t:i.MetaValue}}class Ee{GetLabel(){return null!=this.DisplayLabel&&""!=this.DisplayLabel?this.DisplayLabel:this.MetaName}GetValue(){return null!=this.DisplayValue&&""!=this.DisplayValue.trim()?xe(this.DisplayValue):this.MetaValue}}class Te extends N{Format(e){return t.html`<span>${this.GetValueString(e)}</span>`}}class Ve extends N{Format(e){let i=this.GetValueString(e,null,"");return""==i?null:t.html` <div> <div style="display: inline-block;width: 10px;height: 10px;background-color: ${i}"> </div> <span style="margin-left: 3px">${i}</span> </div> `}}class De extends N{Format(e){let i=this.GetValue(e,"");return null==i?null:t.html` <img style="width: 100%" .src=${class{static GetDownloadLink(e,t,i){let n=t+"__"+i;return e.ajaxurl+"?action="+e._prefix+"_getpublicfileupload&ref="+encodeURI(n)}}.GetDownloadLink(rednaoFormDesigner,i.FileId,i.FileReference)}/> `}}class Ie extends N{Format(e){let i=this.GetValue(e);return null==i?null:t.html` <ul style="display: inline-block;margin: 0;"> ${i.map(((e,i)=>t.html` <li style="margin:0;margin-left: ${i>0?"10px":"0"}"> <div style="display: inline-block;width: 10px;background-color: ${e.Color}"> </div> <span style="margin-left: 3px;">${e.Label}</span> </li> `))} </ul> `}}class Ne extends N{Format(e){let i=this.GetValue(e,["Value","Texts"]);return null==i?null:t.html` <div> ${i.map((e=>t.html` <div> ${a.rnIf(""!=e.Label&&t.html`<strong>${e.Label}: </strong>`)} ${e.Value} </div> `))} </div> `}}class Le extends N{Format(e){let i=this.GetValue(e);if(null==i)return null;let n=i.Value,s=i.Columns;return t.html` <ul style="margin: 0;padding: 0;"> ${n.map(((e,t)=>this.GenerateItemsOfRow(n[t].Columns,s,t)))} </ul> `}GenerateItemsOfRow(e,i,n){return e.map(((e,s)=>t.html` <li><strong>${i.length>s?i[s].Name+" ":""}#${n+1}: </strong>${e}</li> `))}}class Ce{static GetDownloadLink(e,t,i){let n=t+"__"+i;return e.ajaxurl+"?action="+e._prefix+"_getpublicfileupload&ref="+encodeURI(n)}}class Pe extends N{Format(e){let i=this.GetValue(e,["Value"]);return null==i?null:t.html` <div> ${i.map((e=>t.html` <div> ${e.Mime.indexOf("image")>=0?t.html`<img style="max-width: 100%;" src="${Ce.GetDownloadLink(rednaoFormDesigner,e.FileId,e.FileReference)}"/>`:t.html`<a target="{'blank'}" href="${Ce.GetDownloadLink(rednaoFormDesigner,e.FileId,e.FileReference)}">${e.Name}</a>`} </div> `))} </div> `}}class Oe extends N{Format(e){let i=this.GetValue(e);return null==i?null:t.html` <ul style="margin: 0"> ${i.map((e=>t.html` <li style="display: flex;align-items: center;">${a.rnIf(""!=e.Icon.Ref.URL&&t.html`<img style="max-width: 100px;" src=${e.Icon.Ref.URL}/> <span style="margin-left: 5px">${e.Label}</span></li>`)} `))} </ul> `}}class Me extends N{Format(e){let i=this.GetValue(e);return null==i?null:t.html`<span>${i.map((e=>e.Label)).join(", ")}</span>`}}class ke extends N{constructor(e,t,i,n){super(e,t,i),n.CreateRepeaterItem(),this.Fields=n.Rows[0].Columns[0].Field.GetFields(!1,!1,!0),this.FieldColumns=[];for(let e of this.Fields){var s;null===(s=Ue.GetFormatterByField(e))||void 0===s||s.forEach((e=>this.FieldColumns.push(e)))}}Format(e){let i=this.GetValue(e,null);if(this.Fields=[],this.Fields.forEach((e=>Ue.GetFormatterByField(e).forEach((e=>this.FieldColumns.push(e))))),null==i)return null;let n=i.Value;return this.GetRepeaterFields(),t.html` <div> ${n.map(((e,i)=>t.html` <fieldset style="border: 1px solid #dfdfdf;padding: 5px;margin-bottom: 5px;width: 100%;box-sizing: border-box;"> <legend>${RNTranslate("Row # ")+(Number(i)+1)}</legend> <strong style="display: block""></strong> ${this.FieldColumns.map((i=>t.html` <div> ${a.rnIf(""!=i.FieldOptions.Label&&t.html` <strong style="display: block">${i.FieldOptions.Label}</strong>`)} ${i.Format({Data:e.Value})} </div> `))} </fieldset> `))} </div> `}GetRepeaterFields(){}}class Re extends N{Format(e){let i=this.GetValueString(e);return t.html`<div>${xe(i)}</div>`}}var Be={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="check",i=[],n="f00c",s="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z";e.definition={prefix:"fas",iconName:t,icon:[512,512,i,n,s]},e.faCheck=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(Be);class ze extends N{Format(e){return 1==this.GetValue(e)?t.html`<rn-fontawesome .icon="${Be.faCheck}"></rn-fontawesome>`:null}}class Ue{static GetFormatterByField(e){switch(e.Options.Type){case u.FieldTypeEnum.Text:case u.FieldTypeEnum.Numeric:case u.FieldTypeEnum.TextArea:case u.FieldTypeEnum.Email:case u.FieldTypeEnum.Datepicker:case u.FieldTypeEnum.Masked:case u.FieldTypeEnum.Slider:case u.FieldTypeEnum.Hidden:case u.FieldTypeEnum.Total:return[new Te(e.Options.Label,["Value"],e.Options)];case u.FieldTypeEnum.ColorSwatcher:return[new Ie(e.Options.Label,["SelectedValues"],e.Options)];case u.FieldTypeEnum.DateRange:return[new Te(e.Options.StartDate.Label,["Value","StartValue"],e.Options),new Te(e.Options.EndDate.Label,["Value","EndValue"],e.Options)];case u.FieldTypeEnum.DropDown:case u.FieldTypeEnum.Checkbox:case u.FieldTypeEnum.Radio:case u.FieldTypeEnum.ButtonSelection:return[new Me(e.Options.Label,["SelectedValues"],e.Options)];case u.FieldTypeEnum.ImagePicker:return[new Oe(e.Options.Label,["SelectedValues"],e.Options)];case u.FieldTypeEnum.Name:return Ue.GetNameColumn(e.Options);case u.FieldTypeEnum.Address:return Ue.GetAddressColumn(e.Options);case u.FieldTypeEnum.ColorPicker:return[new Ve(e.Options.Label,["Value"],e.Options)];case u.FieldTypeEnum.Signature:return[new De(e.Options.Label,["Value"],e.Options)];case u.FieldTypeEnum.TextualImage:return[new Ne(e.Options.Label,null,e.Options)];case u.FieldTypeEnum.List:return[new Le(e.Options.Label,null,e.Options)];case u.FieldTypeEnum.FileUpload:return[new Pe(e.Options.Label,null,e.Options)];case u.FieldTypeEnum.GroupPanel:return Ue.GetGroupPanel(e);case u.FieldTypeEnum.Repeater:return[new ke(e.Options.Label,null,e.Options,e)];case u.FieldTypeEnum.Survey:return Ue.GetSurveyColumn(e.Options);case u.FieldTypeEnum.FloatPanel:return Ue.GetGroupPanel(e);case u.FieldTypeEnum.SimpleText:return[new Re(e.Options.Label,["Value","HTML"],e.Options)];case u.FieldTypeEnum.Switch:return[new ze(e.Options.Label,["Value"],e.Options)]}return[]}static GetNameColumn(e){return e.Format==m.NameFormatEnum.Single?[new Te(e.FirstNameLabel,["Value","Name"],e)]:[new Te(e.FirstNameLabel,["Value","FirstName"],e),new Te(e.LastNameLabel,["Value","LastName"],e)]}static GetAddressColumn(e){let t=[];return t.push(new Te(e.Address1Label,["Value","Address1"],e)),e.ShowAddress2&&t.push(new Te(e.Address2Label,["Value","Address2"],e)),e.ShowCity&&t.push(new Te(e.CityLabel,["Value","City"],e)),e.ShowState&&t.push(new Te(e.StateLabel,["Value","State"],e)),e.ShowZip&&t.push(new Te(e.ZipLabel,["Value","Zip"],e)),e.ShowCountry&&t.push(new Te(e.CountryLabel,["Value","Country"],e)),t}static GetSurveyColumn(e){let t=[];for(let i of e.Rows)t.push(new Te(i.Label,null,e).SetValueRetriever((e=>{let t=e.SelectedValues.filter((e=>e.Row.Id==i.Id));return 0==t.length?"":t.map((e=>e.Column.Label)).join(", ")})));return t}static GetGroupPanel(e){let t=[];return e.GetFields(!1,!1,!0).filter((e=>e.GetStoresInformation())).forEach((i=>{var n;null===(n=Ue.GetFormatterByField(i))||void 0===n||n.forEach((i=>{i.Parent=e,t.push(i)}))})),t}}var Ae={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="arrow-left",i=[],n="f060",s="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";e.definition={prefix:"fas",iconName:t,icon:[448,512,i,n,s]},e.faArrowLeft=e.definition,e.prefix="fas",e.iconName=t,e.width=448,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(Ae);var Ge={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=[],i="f084",n="M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z";e.definition={prefix:"fas",iconName:"key",icon:[512,512,t,i,n]},e.faKey=e.definition,e.prefix="fas",e.iconName="key",e.width=512,e.height=512,e.ligatures=t,e.unicode=i,e.svgPathData=n}(Ge);var je={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="calendar",i=[],n="f133",s="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z";e.definition={prefix:"far",iconName:t,icon:[448,512,i,n,s]},e.faCalendar=e.definition,e.prefix="far",e.iconName=t,e.width=448,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(je);var He={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="user",i=[],n="f007",s="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z";e.definition={prefix:"far",iconName:t,icon:[448,512,i,n,s]},e.faUser=e.definition,e.prefix="far",e.iconName=t,e.width=448,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(He);var We={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=[],i="f02b",n="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z";e.definition={prefix:"fas",iconName:"tag",icon:[512,512,t,i,n]},e.faTag=e.definition,e.prefix="fas",e.iconName="tag",e.width=512,e.height=512,e.ligatures=t,e.unicode=i,e.svgPathData=n}(We);var qe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="print",i=[],n="f02f",s="M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z";e.definition={prefix:"fas",iconName:t,icon:[512,512,i,n,s]},e.faPrint=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(qe),e.customElement("rn-entry-view")(class extends r.LitElementBase{static get properties(){return{}}render(){var e;return t.html` <div style="padding: 10px" class="rednao"> <button @click="${e=>{e.preventDefault(),this.model.EntryToView=null,this.model.Refresh()}}" style="margin-bottom: 5px;display: inline-flex;align-items: center;" class="rnbtn rnbtn-primary"><rn-fontawesome .icon="${Ae.faArrowLeft}" style="margin-right: 3px"></rn-fontawesome>Back</button> <div style="background-color: white;padding: 15px"> <h1 style="margin-right: 5px;display: inline-block;">Viewing entry ${this.model.EntryToView.FormattedSequence}</h1> <span style="font-style: italic">(From ${null===(e=this.model.FormList.find((e=>e.Id==this.model.FormToUse)))||void 0===e?void 0:e.Name})</span> </div> <div> <div class="fields" style="border: 1px solid #ccc;"> ${this.model.ColumnList.filter((e=>!e.IsEmpty(this.model.EntryToView)&&null==e.FieldOptions&&null!=e.Path&&["FormattedSequence","UnixDate"].indexOf(e.Path[0])>=0)).map((e=>t.html` <div class="printOnly"> <div class="entryViewTitle"> ${e.Title} </div> <div class="entryViewValue"> ${e.Format(this.model.EntryToView)} </div> </div> `))} ${this.model.ColumnList.filter((e=>!e.IsEmpty(this.model.EntryToView)&&null!=e.FieldOptions)).map((e=>t.html` <div> <div class="entryViewTitle"> ${e.Title} </div> <div class="entryViewValue"> ${e.Format(this.model.EntryToView)} </div> </div> `))} ${this.model.ColumnList.filter((e=>!e.IsEmpty(this.model.EntryToView)&&null==e.FieldOptions&&null!=e.Path&&["Status","UserName"].indexOf(e.Path[0])>=0)).map((e=>t.html` <div class="printOnly"> <div class="entryViewTitle"> ${e.Title} </div> <div class="entryViewValue"> ${e.Format(this.model.EntryToView)} </div> </div> `))} </div> <div class="sidebar"> <div style="font-weight: bold;background-color: white;border: 1px solid #ccc;"> <div style="border-bottom: 1px solid #ccc;"> <div style="padding: 10px"> Entry Details </div> </div> <div style="padding: 10px"> <rn-entry-detail-item .model="${this.model}" .icon="${Ge.faKey}" .data="${this.model.EntryToView}" .propertyName="${"FormattedSequence"}"></rn-entry-detail-item> <rn-entry-detail-item .model="${this.model}" .icon="${je.faCalendar}" .data="${this.model.EntryToView}" .propertyName="${"UnixDate"}"></rn-entry-detail-item> <rn-entry-detail-item .model="${this.model}" .icon="${We.faTag}" .data="${this.model.EntryToView}" .propertyName="${"Status"}"></rn-entry-detail-item> <rn-entry-detail-item .model="${this.model}" .icon="${He.faUser}" .data="${this.model.EntryToView}" .propertyName="${"UserName"}"></rn-entry-detail-item> <rn-meta-value-displayer .MetaValues="${this.model.EntryToView.Meta}"></rn-meta-value-displayer> </div> </div> <div style="font-weight: bold;background-color: white;margin-top: 20px;border: 1px solid #ccc;"> <div style="border-bottom: 1px solid #ccc;"> <div style="padding: 10px"> Actions </div> </div> <div style="padding: 10px"> <div class="actionItem"> <rn-fontawesome style="margin-right: 4px" .icon="${qe.faPrint}"></rn-fontawesome> <a href="#" @click="${e=>{e.preventDefault(),window.print()}}">Print</a> </div> </div> </div> </div> </div> </div> `}});class Ke extends y.FormBuilderModel{get IsEntry(){return!0}async MaybeExecuteAConfirmation(e){await p.Dialog.Show(t.html` <rn-result-dialog .content="${""}" .title="${"Entry edited successfully"}" .buttonText="${"Done"}" .iconType="${e.Action.IconType}"></rn-result-dialog>`)}}var Ze={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="pencil-alt",i=[],n="f303",s="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z";e.definition={prefix:"fas",iconName:t,icon:[512,512,i,n,s]},e.faPencilAlt=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(Ze);var Je={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="save",i=[],n="f0c7",s="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z";e.definition={prefix:"fas",iconName:t,icon:[448,512,i,n,s]},e.faSave=e.definition,e.prefix="fas",e.iconName=t,e.width=448,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(Je);var Ye={};function Xe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Qe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="spinner",i=[],n="f110",s="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z";e.definition={prefix:"fas",iconName:t,icon:[512,512,i,n,s]},e.faSpinner=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=i,e.unicode=n,e.svgPathData=s}(Ye),e.customElement("rn-entry-detail-item")(class extends r.LitElementBase{constructor(){super(),this.icon=null,this.IsEditing=!1,this.currentEditValue="",this.LoadUsers=this.LoadUsers.bind(this)}static get properties(){return{}}render(){let e=this.model.ColumnList.find((e=>null!=e.Path&&e.Path[0]==this.propertyName));return null==e?null:t.html` <div class="actionItem" style="margin-bottom: 10px;display: flex;align-items: center;"> <rn-fontawesome style="color:#bbb;margin-right: 4px;" .icon="${this.icon}"></rn-fontawesome> <strong style="margin-right: 5px;white-space: nowrap">${e.Title}</strong> <div style="width: 100%"> ${this.GetControl(e)} </div> </div> `}Edit(){switch(this.IsEditing=!0,this.propertyName){case"FormattedSequence":case"Status":case"UnixDate":this.currentEditValue=this.data[this.propertyName];break;case"UserName":this.currentEditValue=this.data.UserId}this.forceUpdate()}async LoadUsers(e,t){t(await l.WpAjaxPost.Post("query_users",{query:e}))}GetControl(e){if(this.IsEditing)switch(this.propertyName){case"FormattedSequence":return t.html`<div style="display: flex;"><rn-inputs-text .marginBottom="${0}" @change="${e=>{this.currentEditValue=e.detail}}" .value="${this.currentEditValue}"></rn-inputs-text>${this.GetSaveButton()} </div>`;case"Status":return t.html` <div style="display: flex;"> <rn-inputs-select style="width:100%" .marginBottom="${0}" @change="${e=>{this.currentEditValue=e.detail}}" .value="${this.currentEditValue}" .options="${rednaoFormDesigner.StatusList.map((e=>({Label:e.Label,Value:e.Type})))}"></rn-inputs-select> ${this.GetSaveButton()} </div>`;case"UnixDate":return t.html` <div style="display: flex;"> <rn-inputs-datepicker .enableTime="${!0}" style="width:100%" .marginBottom="${0}" @change="${e=>{this.currentEditValue=e.detail}}" .value="${this.currentEditValue}" .options="${rednaoFormDesigner.StatusList.map((e=>({Label:e.Label,Value:e.Type})))}"></rn-inputs-datepicker> ${this.GetSaveButton()} </div>`;case"UserName":return t.html` <div style="display: flex;"> <rn-inputs-select .load="${this.LoadUsers}" style="width:100%" .marginBottom="${0}" @change="${e=>{this.currentEditValue=e.detail}}" .value="${this.currentEditValue}"></rn-inputs-select> ${this.GetSaveButton()} </div>`}return t.html`<div> <span>${e.Format(this.data)}</span> <rn-fontawesome @click="${e=>{this.Edit()}}" class="actionIcon" style="margin-left: 5px;cursor: pointer;" .icon="${Ze.faPencilAlt}"></rn-fontawesome></div>`}GetSaveButton(){return t.html` <button @click="${e=>{this.Save()}}" style="display: inline-block;align-items: center;justify-content: center;" class="rnbtn rnbtn-success"><rn-fontawesome .spin="${this.IsSaving}" .icon="${this.IsSaving?Ye.faSpinner:Je.faSave}"></rn-fontawesome></button>`}async Save(){this.IsSaving=!0,this.forceUpdate();let e="";switch(this.propertyName){case"FormattedSequence":e="_formatted_sequence";break;case"Status":e="_status";break;case"UnixDate":e="_date";break;case"UserName":e="_created_by"}let t=await l.WpAjaxPost.Post("update_field",{Nonce:this.data.EditNonce,EntryId:this.data.EntryId,FieldId:e,Value:this.currentEditValue});null!=t&&("_created_by"==e?(this.data.UserName=t.UserName,this.data.UserEmail=t.UserEmail,this.data.UserId=t.UserId):this.data[this.propertyName]=t,v.ToastService.SendSuccess("Field updated successfully")),this.IsSaving=!1,this.IsEditing=!1,this.model.Refresh()}}),e.customElement("rn-entry-edition")(class extends r.LitElementBase{static get properties(){return{}}render(){var e;let i=this.model.FormList.find((e=>e.Id==this.model.EntryToEdit.FormId)),n=new Ke(i.FormBuilder.FormId,(new c.FormBuilderOptions).Merge(i.FormBuilder.Options.ToObject()),{PreviousData:Qe({},this.model.EntryToEdit,{Fields:this.model.EntryToEdit.Data})});return n.Initialize(),n.ExecuteFirstCalculation(),t.html` <div style="padding: 10px" class="rednao"> <button @click="${e=>{e.preventDefault(),this.model.EntryToEdit=null,this.model.Refresh()}}" style="margin-bottom: 5px;display: inline-flex;align-items: center;" class="rnbtn rnbtn-primary"><rn-fontawesome .icon="${Ae.faArrowLeft}" style="margin-right: 3px"></rn-fontawesome>Back</button> <div style="background-color: white;padding: 15px"> <h1 style="margin-right: 5px;display: inline-block;">Edit entry ${this.model.EntryToEdit.FormattedSequence}</h1> <span style="font-style: italic">(From ${null===(e=this.model.FormList.find((e=>e.Id==this.model.FormToUse)))||void 0===e?void 0:e.Name})</span> </div> <div> <div class="fields" style="border: 1px solid #ccc;background-color: white;padding: 10px;"> ${n.render()} </div> <div class="sidebar"> <div style="font-weight: bold;background-color: white;border: 1px solid #ccc;"> <div style="border-bottom: 1px solid #ccc;"> <div style="padding: 10px"> Entry Details </div> </div> <div style="padding: 10px"> <rn-entry-detail-item .model="${this.model}" .icon="${Ge.faKey}" .data="${this.model.EntryToEdit}" .propertyName="${"FormattedSequence"}"></rn-entry-detail-item> <rn-entry-detail-item .model="${this.model}" .icon="${je.faCalendar}" .data="${this.model.EntryToEdit}" .propertyName="${"UnixDate"}"></rn-entry-detail-item> <rn-entry-detail-item .model="${this.model}" .icon="${We.faTag}" .data="${this.model.EntryToEdit}" .propertyName="${"Status"}"></rn-entry-detail-item> <rn-entry-detail-item .model="${this.model}" .icon="${He.faUser}" .data="${this.model.EntryToEdit}" .propertyName="${"UserName"}"></rn-entry-detail-item> <rn-meta-value-displayer .MetaValues="${this.model.EntryToEdit.Meta}"></rn-meta-value-displayer> </div> </div> </div> </div> </div> `}});class et extends d.ModelBase{constructor(e){super(e),this.EntryToView=null,this.StickyOffset=0,this.ShowAdvanceOptions=!1,this.StickyLeft=0,this.tableIsBusy=!1,this.Data=[],this.PageSize=60,this.PageIndex=0,this.StartDate=0,this.EndDate=0,this.Form=0,this.InitialScrollLeft=0,this.InitialScrollTop=0,this.TotalNumberOfRows=0,this.SearchWasExecuted=!1,this.AdvancedOptionsCondition=null,this.StartDateToUse=0,this.EndDateToUse=0,this.FormToUse=0,this.EntryIds=[],this.ColumnList=[],this.SerializeForms(),this.ConditionBuilder=new $.ConditionBuilderModel}render(){return t.html`<rn-entries .model="${this}"></rn-entries>`}SerializeForms(){this.FormList=[];for(let e of rednaoFormDesigner.FormList){let t=JSON.parse(e.client_form_options);t.Icons=JSON.parse(e.icons);let i=new h.FormBuilderDesignerModel(e.form_id,(new c.FormBuilderOptions).Merge({Rows:JSON.parse(e.element_options),ClientOptions:t}),null);this.FormList.push({Id:e.form_id,Name:e.form_name,FormBuilder:i}),this.GenerateFields(i)}this.FormList.length>0&&(this.Form=this.FormList[0].Id)}async InternalSearch(){var e;if(0==this.FormToUse)return;this.tableIsBusy=!0,this.Refresh();let t=await l.WpAjaxPost.Post("search_entries",{Form:this.Form,StartDate:this.StartDate,EndDate:this.EndDate,PageIndex:this.PageIndex,PageSize:this.PageSize,FilterCondition:null===(e=this.AdvancedOptionsCondition)||void 0===e?void 0:e.ToObject()});if(this.tableIsBusy=!1,null!=t){if(this.UpdateURL(),this.CurrentForm=this.FormList.find((e=>e.Id==this.Form.toString())).FormBuilder,this.ColumnList=[],this.ColumnList.push(new L("Number",["FormattedSequence"],null).SetWidth("150px")),this.ColumnList.push(new P("Date",["UnixDate"],null)),this.ColumnList.push(new O("Status",["Status"],null)),this.Data=[],t.Rows.forEach((e=>this.Data.push(new Fe(this.CurrentForm).Load(e)))),this.CurrentForm.GetFields(!1,!1,!1).filter((e=>e.GetStoresInformation())).forEach((e=>{var t;null===(t=Ue.GetFormatterByField(e))||void 0===t||t.forEach((e=>this.ColumnList.push(e)))})),this.ColumnList.push(new L("Created By",["UserName"],null).SetWidth("200px")),this.TotalNumberOfRows=t.Count,0==this.Data.length&&t.Count>0&&this.PageIndex>=1)return this.PageIndex=Math.floor(t.Count/this.PageSize),this.InternalSearch();this.Refresh((()=>{0==this.InitialScrollLeft&&0==this.InitialScrollTop||(window.scrollTo(this.InitialScrollLeft,this.InitialScrollTop),this.InitialScrollLeft=0,this.InitialScrollTop=0)}))}}FormatDateForURL(e){let t=C.UnixToDate(e);return t.getFullYear()+"."+(t.getMonth()+1)+"."+t.getDate()}UpdateURL(){let e=new URL(window.location.href);this.StartDateToUse>0?e.searchParams.set("StartDate",this.FormatDateForURL(this.StartDateToUse)):e.searchParams.delete("StartDate"),this.EndDateToUse>0?e.searchParams.set("EndDate",this.FormatDateForURL(this.EndDateToUse)):e.searchParams.delete("EndDate"),this.FormToUse>0?e.searchParams.set("Form",this.FormToUse.toString()):e.searchParams.delete("Form"),this.PageIndex>0?e.searchParams.set("PageIndex",this.PageIndex.toString()):e.searchParams.delete("PageIndex"),this.PageSize>0?e.searchParams.set("PageSize",this.PageSize.toString()):e.searchParams.delete("PageSize"),this.PageIndex>0?e.searchParams.set("PageIndex",this.PageIndex.toString()):e.searchParams.delete("PageIndex"),this.InitialScrollLeft>0?e.searchParams.set("ScrollLeft",this.InitialScrollLeft.toString()):e.searchParams.delete("ScrollLeft"),this.InitialScrollTop>0?e.searchParams.set("ScrollTop",this.InitialScrollTop.toString()):e.searchParams.delete("ScrollTop"),window.history.replaceState({View:"Entries"},document.title,e.toString())}async DeleteSelected(){let e=this.Table.SelectedRows;0!=e.length&&await f.DeleteDialog.Show("Deleting "+e.length+" Items","This operation is not reversible",(async()=>await this.DeleteItems(e.map((e=>e.EntryId)))))}async ViewSelected(){return this.ViewItem(this.Table.SelectedRows),!0}Export(){var e;""!=rednaoFormDesigner.IsPr?window.open(rednaoFormDesigner.ajaxurl+"?action="+rednaoFormDesigner._prefix+"_export_entries&data="+JSON.stringify({StartDate:this.StartDate,EndDate:this.EndDate,Form:this.Form,FilterCondition:null===(e=this.AdvancedOptionsCondition)||void 0===e?void 0:e.ToObject()})+"&_nonce="+rednaoFormDesigner._nonce):p.Dialog.Show(t.html`<rn-license-required .message=${"This feature is only available in the full version"}></rn-license-required>`)}ViewItem(e,t=null){this.InitialScrollTop=window.scrollY,this.InitialScrollLeft=window.scrollX,this.UpdateURL();let i=rednaoFormDesigner.EntriesURL+"&EntryIds="+e.map((e=>e.EntryId));if(null!=t&&(t.shiftKey||t.ctrlKey))window.open(i);else{this.SelectedEntries=e;let t=this.FormList.find((t=>t.Id==e[0].FormId));this.SelectedForm=null==t?null:{Name:t.Name,FormBuilder:t.FormBuilder},this.EntryIds=e.map((e=>e.EntryId)),window.history.pushState({View:"SingleEntry"},document.title,i),this.Refresh()}}async DeleteItems(e){return this.tableIsBusy=!0,this.Refresh(),null!=await l.WpAjaxPost.Post("delete_entries",{Ids:e})&&(this.InternalSearch(),!0)}async Search(e=!0){0!=this.Form?(this.FormToUse=this.Form,this.StartDateToUse=this.StartDate,this.EndDateToUse=this.EndDate,e&&(this.PageIndex=0),this.IsBusy=!0,this.Refresh(),await this.InternalSearch(),this.IsBusy=!1,this.Refresh()):v.ToastService.SendErrorMessage("Form is mandatory")}async ActionClicked(e,i){let n=i.detail.Row;if("View"==e&&(this.EntryToView=i.detail.Row,this.Refresh()),"Edit"==e){if(""==rednaoFormDesigner.IsPr)return void p.Dialog.Show(t.html`<rn-license-required .message=${"This feature is only available in the full version"}></rn-license-required>`);this.EntryToEdit=i.detail.Row,this.Refresh()}"Delete"==e&&await f.DeleteDialog.Show("Deleting entry "+n.Sequence,"This operation is not reversible",(async()=>await this.DeleteItems([n.EntryId])))}RecalculateSizes(){let e=window.document.getElementById("wpadminbar");null!=e&&(this.StickyOffset=e.getBoundingClientRect().height),e=window.document.getElementById("adminmenuback"),null!=e&&(this.StickyLeft=e.getBoundingClientRect().width),this.Refresh()}ApplyBulkAction(e){if(0!=this.Table.SelectedRows.length)switch(e){case"Delete":this.DeleteSelected();break;case"View":this.ViewSelected()}}ToggleAdvancedCondition(){""!=rednaoFormDesigner.IsPr?(this.ShowAdvanceOptions?(this.ShowAdvanceOptions=!1,this.AdvancedOptionsCondition=null):(this.AdvancedOptionsCondition=(new g.ConditionBaseOptions).Merge({ConditionGroups:[{ConditionLines:[{}]}]}),this.ShowAdvanceOptions=!0),this.Refresh()):p.Dialog.Show(t.html`<rn-license-required .message=${"This feature is only available in the full version"}></rn-license-required>`)}GenerateFields(e){e.GetFields(!1,!1,!1).forEach((e=>{e.Options.Type==u.FieldTypeEnum.Repeater&&0==e.Rows.length&&e.CreateRepeaterItem()}))}}class tt extends w.StoreBase{LoadDefaultValues(){}}l.WpAjaxPost.SetGlobalVar(rednaoFormDesigner),l.WpAjaxPost.DefaultHandleError=(e,t)=>{o.AlertDialog.Show(t,e,"Close","Error")},exports.EntriesModel=et,exports.EntriesOptions=tt}));
