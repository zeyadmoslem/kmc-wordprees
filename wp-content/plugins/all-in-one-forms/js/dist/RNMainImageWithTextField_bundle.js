rndefine("#RNMainImageWithTextField",["#RNMainCore/EventManager","#RNMainFormBuilderCore/FieldBase.Options","lit","#RNMainFormBuilderCore/FieldWithPrice.Model","lit/decorators","#RNMainFormBuilderCore/FieldBase","#RNMainFormBuilderCore/FieldWithPrice","#RNMainCore/LitElementBase","lit/directives/repeat.js","lit-html/directives/live.js","#RNMainCore/StoreBase","#RNMainFormBuilderCore/FieldWithPrice.Options","#RNMainFormBuilderCore/FormBuilder.Options","#RNMainFormBuilderCore/ItemOptions.Options"],(function(e,t,i,l,r,a,s,n,o,d,p,h,m,u){"use strict";class g extends l.FieldWithPriceModel{constructor(e,t){super(e,t),this.Options=e,this.Texts=[],this.IsFocused=!1}InternalSerialize(e){super.InternalSerialize(e),e.Value=this.GetValue()}GetStoresInformation(){return!0}GetIsUsed(){return!!super.GetIsUsed()&&null!=this.GetValue()}GetValue(){return this.GetIsVisible()&&0!=this.Texts.length?{Image:this.Options.Image,ImageWidth:this.Options.ImageWidth,ImageHeight:this.Options.ImageHeight,Texts:this.Texts}:null}InitializeStartingValues(){this.Texts=this.GetPreviousDataProperty("Value,Texts",[]);let e=this.Options.Texts.filter((e=>""!=e.DefaultText));for(let t of e)this.Texts.some((e=>e.Id==t.Id))||this.Texts.push({Label:t.Label,Id:t.Id,Left:t.Left,Top:t.Top,Value:t.DefaultText})}GetDynamicFieldNames(){return["FBTextualImage"]}render(){return i.html`<rn-image-with-text-field .model="${this}"></rn-image-with-text-field>`}}var c,x,I,b,T,f,y,v,O;c=r.customElement("rn-image-with-text-preview"),x=r.query(".rnImageContainer"),I=r.query(".rnImageElement"),b=r.query(".rootContainer"),c((T=class extends n.LitElementBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"ImageContainer",f,this),babelHelpers.initializerDefineProperty(this,"Image",y,this),babelHelpers.initializerDefineProperty(this,"RootContainer",v,this)}render(){return i.html` <div style="display: flex;width:100%;height: 100%;justify-content: center;align-content: center;margin-bottom: 5px;" class="rootContainer"> <div style="position: relative" class='rnImageContainer'> ${null!=this.model.Options.Image?i.html`<img alt="" class='rnImageElement' style="width: ${this.model.Options.ImageWidth}px;height: ${this.model.Options.ImageHeight}px;max-width: none;max-height: none;" src=${this.model.Options.Image.URL}/>`:i.html` <div class='rnImageElement' style="width:${this.model.Options.ImageWidth}px;height: ${this.model.Options.ImageHeight}px;border: 1px solid #dfdfdf;max-width: none;max-height: none"/>`} ${o.repeat(this.model.Options.Texts,(e=>e.Id),((e,t)=>{var l;let r=e.Left,a=e.Top,s=null===(l=this.model.Texts.find((t=>t.Id==e.Id)))||void 0===l?void 0:l.Value;return null==s&&(s=e.DefaultText),i.html` <div style="font-weight: bold;text-align: center;position: absolute;top: ${a}px;left: ${r}px;width: ${e.Width}px;border: 1px solid transparent;"> <span> ${s} </span> </div> `}))} </div> </div> </div> `}firstUpdated(e){super.firstUpdated(e),this.UpdateImageSize()}UpdateImageSize(){if(null==this.ImageContainer||null==this.Image||null==this.RootContainer)return;let e=this.model.Options.ImageWidth,t=this.RootContainer.getBoundingClientRect().width,i=0;i=e<=t?1:100*t/e/100,this.ImageContainer.style.transform="scale("+i+")"}},f=babelHelpers.applyDecoratedDescriptor(T.prototype,"ImageContainer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=babelHelpers.applyDecoratedDescriptor(T.prototype,"Image",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=babelHelpers.applyDecoratedDescriptor(T.prototype,"RootContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T)),r.customElement("rn-image-with-text-input")(class extends n.LitElementBase{render(){return i.html` <div style="margin-bottom: -5px"> ${this.model.Options.Texts.map((e=>{var t;let l=null===(t=this.model.Texts.find((t=>t.Id==e.Id)))||void 0===t?void 0:t.Value;return i.html` <div class= ${"rnrow rncontrol"}> ${""==e.Label.trim()?null:i.html`<label>${e.Label}</label>`} <input .readOnly=${this.readOnly} type='text' @input="${t=>this.Change(e,t.target.value)}" .value=${d.live(l||"")} .placeholder=${e.Placeholder}/> </div> `}))} </div> `}Change(e,t){let i=this.model.Texts.find((t=>t.Id==e.Id));""==t?null!=i&&this.model.Texts.splice(this.model.Texts.indexOf(i),1):(null==i&&(i={Id:e.Id,Top:e.Top,Left:e.Left,Label:e.Label,Value:""},this.model.Texts.push(i)),i.Value=t),this.model.FireValueChanged()}});let D=r.customElement("rn-image-with-text-field")(O=class extends s.FieldWithPrice{static get properties(){return a.FieldBase.properties}SubRender(){return i.html` <div style="position: relative;"> <rn-image-with-text-preview .model="${this.model}"></rn-image-with-text-preview> <rn-image-with-text-input .model="${this.model}" .readOnly="${this.model.IsReadonly}"></rn-image-with-text-input> </div> `}OnChange(e){this.model.SetText(e.target.value)}})||O;var w,F,C;let L=(w=p.StoreAutoIncrement("TextualImageLabelItem"),F=class extends u.ItemOptions{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Id",C,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.Id=0,this.DefaultText="Text",this.Label="",this.Top=0,this.Left=0,this.Width=0,this.Placeholder=""}},C=babelHelpers.applyDecoratedDescriptor(F.prototype,"Id",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F);var $,P,W,M,z,H,R;let S=($=p.StoreDataType(Object),P=p.StoreDataType(L),W=p.StoreDataType(Object),M=class extends h.FieldWithPriceOptions{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Image",z,this),babelHelpers.initializerDefineProperty(this,"Texts",H,this),this.FreeCharOrWords=0,babelHelpers.initializerDefineProperty(this,"Icon",R,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.Type=t.FieldTypeEnum.TextualImage,this.Label="Textual Image",this.Image=null,this.ImageWidth=400,this.ImageHeight=400,this.Texts=[(new L).Merge({Width:300,Left:0,Top:0,DefaultText:"Text 1",Placeholder:"Text",Label:"Text",Id:0})],this.IgnoreSpaces=!1,this.ShowQuantitySelector=!1,this.Icon=(new m.IconOptions).Merge(),this.PriceType=h.PriceTypeEnum.none,this.FreeCharOrWords=0}},z=babelHelpers.applyDecoratedDescriptor(M.prototype,"Image",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=babelHelpers.applyDecoratedDescriptor(M.prototype,"Texts",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=babelHelpers.applyDecoratedDescriptor(M.prototype,"Icon",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M);exports.ImageWithTextFieldModel=g,exports.ImageWithTextField=D,exports.ImageWithTextFieldOptions=S,exports.TextualImageLabelItemOptions=L,e.EventManager.Subscribe("GetFieldOptions",(e=>{if(e==t.FieldTypeEnum.TextualImage)return new S})),e.EventManager.Subscribe("GetFieldModel",(e=>{if(e.Options.Type==t.FieldTypeEnum.TextualImage)return new g(e.Options,e.Parent)}))}));
